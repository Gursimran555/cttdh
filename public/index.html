<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Autumn</title>

  <!-- Defer JavaScript -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Preconnect to Google Fonts for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>



  <!-- Load Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<style>
  /* cormorant-garamond-latin-400-normal */
  @font-face {
    font-family: 'Cormorant Garamond';
    font-style: normal;
    font-display: swap;
    font-weight: 400;
    src: url(https://cdn.jsdelivr.net/fontsource/fonts/cormorant-garamond@latest/latin-400-normal.woff2) format('woff2'), url(https://cdn.jsdelivr.net/fontsource/fonts/cormorant-garamond@latest/latin-400-normal.woff) format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style>
<style>
  /* Minified CSS */
  .heart-button {
    transition: color .3s ease, transform .3s ease
  }

  .heart-button:hover {
    transform: scale(1.1)
  }

  .heart-button .fa-heart {
    transition: color .3s ease
  }

  .heart-button .fa-heart.text-red-500 {
    color: #ef4444
  }

  body {
    font-family: 'Poppins', sans-serif
  }

  .product-card {
    transition: transform .3s ease, box-shadow .3s ease;

  }

  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, .15)
  }

  .relative {
    height: 100 px;
    /* Adjusted height for related product images */
    object-fit: cover;
    cursor: pointer;
    /* Make image clickable */
  }

  .product-card img {
    height: 400px;
    /* Set a fixed height */
    width: 100%;
    /* Ensure the width fills the container */
    object-fit: cover;
    /* Maintain aspect ratio while filling the container */
    border-radius: 8px;
    /* Optional: Add border-radius if needed */
  }

  .product-card {
    height: 700px;
    /* Set a fixed height for the card */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    /* Adjust content spacing */
  }



  .view-details-btn {
    background-color: #FFA500;
    color: white;
    width: 100%;
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color .3s ease
  }

  .view-details-btn:hover {
    background-color: #FF8C00
  }

  .filter-section {
    background-color: #f9fafb;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, .1);
    display: flex;
    flex-direction: column;
    gap: 16px
  }

  .filter-section select {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    width: 100%;
    max-width: 200px
  }

  .footer {
    background-color: #2d3748;
    color: white;
    padding: 40px 0
  }

  .footer a {
    color: #a0aec0;
    transition: color .3s ease
  }

  .footer a:hover {
    color: #fff
  }

  .price-cut {
    text-decoration: line-through;
    color: #999;
    font-size: 20px
  }

  .discount-badge {
    background-color: #FF4757;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-left: 8px
  }
</style>


<style>
  /* Hero Section */
  .hero-section {
    background-image: url('./images/blue-wavy-background.jpg');
    background-size: cover;
    background-position: center;
    height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
  }

  /* Overlay for better text readability */
  .hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    /* Dark overlay */
    z-index: 1;
  }

  /* Text and Image Grid */
  .hero-section .container {
    z-index: 2;
  }

  /* Image Hover Effect */
  .hero-section img {
    transition: transform 0.3s ease;
  }

  .hero-section img:hover {
    transform: scale(1.05);
  }
</style>


</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Navigation -->
  <header class="bg-white shadow-lg fixed w-full z-10">
    <div class="container mx-auto px-6 py-4 flex flex-wrap justify-between items-center">
      <!-- Logo -->
      <a href="/">
        <img src="./images/logo.png" alt="Autumn Logo" class="h-10">
      </a>

      <!-- Icons Section -->
      <div class="flex items-center gap-4">
        <a id="loginButton" href="/auth.html" class="text-gray-700 hover:text-indigo-600 transition duration-300">
          <i class="fas fa-user text-2xl"></i>
        </a>
        <a id="logoutButton" href="#" class="text-gray-700 hover:text-red-600 transition duration-300 hidden">
          <i class="fa-regular fa-circle-user text-2xl"></i>
        </a>
        <!-- Update the cart icon in the navbar -->
        <a href="/cart.html" class="text-gray-700 hover:text-green-600 transition duration-300 relative">
          <i class="fas fa-shopping-cart text-2xl"></i>
          <span id="cartCount"
            class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5 transform translate-x-1/2 -translate-y-1/2">0</span>
        </a>

        <a href="/wishlist.html" class="text-gray-700 hover:text-green-600 transition duration-300">
          <i class="fas fa-heart text-2xl"></i>
        </a>
        <a href="/orders.html" class="text-gray-700 hover:text-green-600 transition duration-300">
          <i class="fas fa-box text-2xl"></i>
        </a>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <!-- Hero Section -->
  <section class="hero-section bg-cover bg-center"
    style="background-image: url('./images/fashionable-clothing-modern-boutique-store-generated-by-ai.jpg');">
    <div class="hero-overlay bg-black bg-opacity-50 h-full">
      <div class="container mx-auto px-6 flex items-end justify-center h-full min-h-[500px]">
        <!-- Adjusted for center bottom -->
        <!-- Text Content -->
        <div class="text-center z-10 mb-16"> <!-- Added margin-bottom for spacing -->
          <h1 class="text-5xl lg:text-6xl font-bold text-white mb-6">Autumn</h1>
          <p class="text-xl text-gray-200 mb-8">Discover the latest trends in men's and women's fashion. Shop now</p>
          <a href="#products"
            class="bg-white text-gray-900 px-8 py-4 rounded-lg font-semibold hover:bg-gray-100 transition duration-300 text-lg">
            Shop Now
          </a>
        </div>
      </div>
    </div>
  </section>
  <!-- Sorting Options -->
  <!-- Remove Size Filter -->
  <div class="filter-section">
    <div class="flex flex-wrap gap-4">
      <select id="gender" class="p-2 border rounded-lg">
        <option value="">All Genders</option>
        <option value="Men">Men</option>
        <option value="Women">Women</option>
      </select>

      <select id="color" class="p-2 border rounded-lg">
        <option value="">All Colors</option>
        <option value="Red">Red</option>
        <option value="Blue">Blue</option>
        <option value="Green">Green</option>
        <option value="Black">Black</option>
        <option value="White">White</option>
      </select>

      <select id="price" class="p-2 border rounded-lg">
        <option value="">Price</option>
        <option value="asc">Low to High</option>
        <option value="desc">High to Low</option>
      </select>

      <button id="applyFilters"
        class="bg-stone-700 text-white px-6 py-2 rounded-lg hover:bg-stone-950 transition duration-300">
        Apply Filters
      </button>
    </div>
  </div>

  <!-- Product Grid -->
  <div id="products" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
    <!-- Products will be dynamically loaded here -->
  </div>
  </div>

  <footer class="bg-amber-50 border-t-4 border-amber-200 shadow-lg">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-8 lg:gap-12">
        <!-- Brand Section -->
        <div class="md:col-span-2">
          <h3 class="text-2xl font-bold text-amber-900 mb-4">Autumn T-Shirts</h3>
          <p class="text-amber-700 text-sm leading-relaxed">
            Embrace seasonal style with our curated collection of autumn-inspired apparel.
            Where comfort meets trend in every stitch.
          </p>

        </div>

        <!-- Quick Links -->
        <div>
          <h4 class="text-amber-900 font-semibold mb-4 text-lg">Explore</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-amber-700 hover:text-amber-900 transition-colors">Men's Collection</a></li>
            <li><a href="#" class="text-amber-700 hover:text-amber-900 transition-colors">Women's Styles</a></li>
          </ul>
        </div>

        <!-- Support -->
        <div>
          <h4 class="text-amber-900 font-semibold mb-4 text-lg">Support</h4>
          <ul class="space-y-2">

            <li><a href="./policies.html" class="text-amber-700 hover:text-amber-900 transition-colors">Terms and
                conditions</a></li>
            <li><a href="./contact-support.html" class="text-amber-700 hover:text-amber-900 transition-colors">Contact
                Support</a></li>
            <li><a href="./report-bug.html" class="text-amber-700 hover:text-amber-900 transition-colors">Report a Bug
              </a></li>
          </ul>
        </div>

        <!-- Contact -->
        <div>
          <h4 class="text-amber-900 font-semibold mb-4 text-lg">Connect</h4>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-amber-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span class="text-amber-700">support@autumnindia.com</span>
            </div>
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-amber-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <span class="text-amber-700">+91 8354926995</span>
            </div>
          </div>

          <!-- Social Icons -->
          <div class="mt-4 flex gap-3">
            <a href="#" class="p-2 bg-amber-100 rounded-full hover:bg-amber-200 transition-colors">
              <svg class="w-5 h-5 text-amber-700" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
              </svg>
            </a>
            <a href="#" class="p-2 bg-amber-100 rounded-full hover:bg-amber-200 transition-colors">
              <svg class="w-5 h-5 text-amber-700" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z" />
              </svg>
            </a>
            <a href="https://www.instagram.com/autumn_official_?igsh=bzQ1emY2OXZlbXNk&utm_source=qr"
              class="p-2 bg-amber-100 rounded-full hover:bg-amber-200 transition-colors">
              <svg class="w-5 h-5 text-amber-700" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
              </svg>
            </a>
          </div>
        </div>
      </div>

      <!-- Copyright -->
      <div class="mt-12 pt-8 border-t border-amber-200 text-center">
        <p class="text-sm text-amber-600">
          © 2025 Autumn Styles.
        </p>
      </div>
    </div>
  </footer>

  <script defer>
    const productsContainer = document.getElementById('products');
    const logoutButton = document.getElementById('logoutButton');
    const loginButton = document.getElementById('loginButton');
    const applyFiltersButton = document.getElementById('applyFilters');

    // Check if user is logged in
    const token = localStorage.getItem('token');
    if (token) {
      loginButton.style.display = 'none';
      logoutButton.style.display = 'block';
    }

    logoutButton.addEventListener('click', () => {
      localStorage.removeItem('token');
      window.location.reload();
    });

    // Function to fetch and display products

    function fetchProducts(filters = {}) {
      const queryParams = new URLSearchParams(filters).toString();
      fetch(`/products?${queryParams}`)
        .then(res => res.json())
        .then(products => {
          const grid = productsContainer;
          grid.innerHTML = ''; // Clear existing products
          products.forEach(product => {
            const originalPrice = Math.round(product.price * 1.25); // Add 25% to show discount
            const discountPercentage = 20; // 20% discount

            // Determine stock status
            let stockStatus = '';
            let stockClass = '';
            if (product.quantity > 0) {
              stockStatus = 'In Stock';
              stockClass = 'text-green-500';
              if (product.quantity < 3) {
                stockStatus = 'Only Few Items Left';
                stockClass = 'text-yellow-500';
              }
            } else {
              stockStatus = 'Out of Stock';
              stockClass = 'text-red-500';
            }

            const productCard = document.createElement('div');
            productCard.className = 'bg-white rounded-lg shadow-lg p-4 sm:p-6 w-full sm:w-auto product-card hover:shadow-xl transition duration-300';
            productCard.innerHTML = `
  <div class="relative">
    <img src="${product.image_url}" alt="${product.name}" class="w-full h-48 sm:h-64 object-cover rounded-lg mb-2 cursor-pointer" onclick="window.location.href='/product.html?id=${product.id}'" crossorigin="anonymous">
    <!-- Stock Status -->
    <div class="absolute top-2 left-2 bg-white p-1 sm:p-2 rounded-full shadow-md text-xs sm:text-sm ${stockClass}">
      ${stockStatus}
    </div>
    <!-- Heart Button -->
    <button class="absolute top-2 right-2 bg-white p-1 sm:p-2 rounded-full shadow-md hover:bg-gray-100 transition-colors" data-product-id="${product.id}">
      <i class="fas fa-heart text-gray-500 hover:text-red-500 text-sm sm:text-base"></i>
    </button>
  </div>
  <h3 class="text-lg sm:text-xl font-semibold text-gray-800 mt-1 sm:mt-2">${product.name}</h3>
  <p class="text-gray-600 text-sm sm:text-base mt-1">${product.description.substring(0, 50)}...</p>
  <div class="mt-1 sm:mt-2">
    <span class="price-cut text-sm sm:text-base">₹${originalPrice}</span>
    <span class="text-green-500 font-bold text-sm sm:text-base">₹${product.price}</span>
    <span class="discount-badge text-xs sm:text-sm">${discountPercentage}% off</span>
  </div>
  <div class="mt-2 sm:mt-4">
    <button onclick="window.location.href='/product.html?id=${product.id}'" class="view-details-btn text-sm sm:text-base">
      <i class="fas fa-eye"></i> View Details
    </button>
  </div>
`;

            // Append the product card to the grid
            grid.appendChild(productCard);
          });
        });
    }


    // Apply filters when the button is clicked
    applyFiltersButton.addEventListener('click', () => {
      const gender = document.getElementById('gender').value;
      const color = document.getElementById('color').value;
      const price = document.getElementById('price').value;

      const filters = {};
      if (gender) filters.gender = gender;
      if (color) filters.color = color;
      if (price) filters.sort = `price:${price}`;

      fetchProducts(filters);
    });

    // Initial load of products
    fetchProducts();
  </script>


  <script defer>
    // script for wishlist 
    document.addEventListener('click', async (event) => {
      // Check if the clicked element is a heart button or its child (the icon)
      const heartButton = event.target.closest('[data-product-id]');
      if (heartButton) {
        const productId = heartButton.dataset.productId;
        const token = localStorage.getItem('token');

        // If the user is not logged in, redirect them to the login page
        if (!token) {
          alert('Please login to add products to your wishlist.');
          window.location.href = '/auth.html';
          return;
        }

        try {
          // Send a POST request to add the product to the wishlist
          const response = await fetch('/wishlist', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              Authorization: `Bearer ${token}`,
            },
            body: JSON.stringify({ productId }),
          });

          const result = await response.json();

          if (result.success) {
            alert('Product added to wishlist!');
            // Optionally, change the heart icon color to red to indicate it's in the wishlist
            heartButton.querySelector('i').classList.remove('text-gray-500');
            heartButton.querySelector('i').classList.add('text-red-500');
          } else {
            alert(result.message);
          }
        } catch (error) {
          console.error('Error adding to wishlist:', error);
          alert('Failed to add product to wishlist.');
        }
      }
    });
  </script>



  <script defer>
    document.addEventListener("DOMContentLoaded", function () {
      var lazyloadImages = document.querySelectorAll(".lazyload");
      var lazyloadThrottleTimeout;

      function lazyload() {
        if (lazyloadThrottleTimeout) {
          clearTimeout(lazyloadThrottleTimeout);
        }

        lazyloadThrottleTimeout = setTimeout(function () {
          var scrollTop = window.pageYOffset;
          lazyloadImages.forEach(function (img) {
            if (img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazyload');
            }
          });
          if (lazyloadImages.length == 0) {
            document.removeEventListener("scroll", lazyload);
            window.removeEventListener("resize", lazyload);
            window.removeEventListener("orientationChange", lazyload);
          }
        }, 20);
      }

      document.addEventListener("scroll", lazyload);
      window.addEventListener("resize", lazyload);
      window.addEventListener("orientationChange", lazyload);
    });
  </script>



  <style>
    /* Mobile-specific styles */
    @media (max-width: 640px) {

      /* Adjust product grid for mobile */
      #products {
        grid-template-columns: repeat(2, 1fr) !important;
        /* 2 products per row */
        gap: 8px !important;
        /* Reduce gap between products */
      }

      /* Reduce font sizes for mobile */
      h1 {
        font-size: 2rem;
        /* Smaller heading */
      }

      p {
        font-size: 0.875rem !important;
        /* Smaller paragraph text */
      }

      /* Adjust hero section height for mobile */
      .hero-section {
        height: 95vh !important;



        /* Reduce height */
      }

      /* Stack filters vertically on mobile */
      .filter-section .flex {
        flex-direction: column !important;
      }

      .filter-section select,
      .filter-section button {
        width: 100% !important;
        /* Full width for filters */
        margin-bottom: 8px;
        /* Add spacing between stacked filters */
      }

      /* Adjust image sizes for mobile */
      .product-card img {
        height: 200px !important;
        /* Smaller images */
      }

      /* Footer adjustments for mobile */
      .footer .grid {
        grid-template-columns: repeat(1, 1fr) !important;
        /* Stack footer columns */
      }
    }
  </style>

  <style>
    @media (max-width: 640px) {
      html {
        font-size: 14px;
        /* Base font size for mobile */
      }

      h1 {
        font-size: 1.25rem !important;
        /* Adjust heading size */
      }

      h2 {
        font-size: 1.25rem !important;
      }

      p {
        font-size: 0.875rem !important;
        /* Adjust paragraph size */
      }

      button {
        font-size: 0.875rem !important;
        /* Adjust button text size */
      }
    }
  </style>
  <style>
    /* Mobile-specific styles */
    @media (max-width: 640px) {

      /* Adjust product grid for mobile */
      #products {
        grid-template-columns: repeat(2, 1fr) !important;
        /* 2 products per row */
        gap: 12px !important;
        /* Reduce gap between products */
      }

      /* Explicitly set the width and padding of the product card container */
      .product-card {
        width: 100% !important;
        /* Make the card take full width of its grid column */
        height: fit-content;
        max-width: 300px !important;
        /* Set a smaller max-width for the card */
        padding: 0.5rem !important;
        /* Reduce padding */
        margin: 0 auto;
        /* Center the card within its grid column */
      }

      /* Adjust image size to fit the smaller container */
      .product-card img {
        height: 260px !important;
        /* Reduce image height */
        width: 100% !important;
        /* Ensure image fills the container width */
      }

      /* Remove default margins and reduce gaps between elements */
      .product-card h3 {
        font-size: 1.2rem !important;
        /* Smaller font size for product name */
        margin: 0 !important;
        /* Remove default margin */
      }

      .product-card p {
        font-size: 0.75rem !important;
        /* Smaller font size for description */
        margin: 0 !important;
        /* Remove default margin */
      }

      .product-card .view-details-btn {
        font-size: 0.75rem !important;
        /* Smaller font size for button text */
        padding: 0.25rem 0.5rem !important;
        /* Reduce button padding */
        margin: 0.25rem 0 0 0 !important;
        /* Reduce gap before button */
      }

      .product-card .price-cut,
      .product-card .text-green-500,
      .product-card .discount-badge {
        font-size: 0.75rem !important;
        /* Smaller font size for price and discount */
        margin: 0 !important;
        /* Remove default margin */
      }
    }
  </style>
  <!--script for cart number updation -->
  <script defer>
    // Function to update the cart count in the navbar
    function updateCartCount(count) {
      const cartCountElement = document.getElementById('cartCount');
      if (cartCountElement) {
        cartCountElement.textContent = count;
      }
    }

    // Fetch cart data and update the count
    async function fetchCart() {
      try {
        const token = localStorage.getItem('token');
        if (!token) {
          throw new Error('No token found');
        }

        const response = await fetch('/cart', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const cartData = await response.json();

        // Update the cart count in the navbar
        updateCartCount(cartData.length);
      } catch (error) {
        console.error('Fetch error:', error);
        // If the user is not logged in, the cart count will remain 0
      }
    }

    // Update the cart count when an item is added
    async function addToCart(productId) {
      const quantity = 1; // Default quantity for index.html
      const token = localStorage.getItem('token');

      if (!token) {
        alert('Please login to add items to your cart.');
        window.location.href = '/auth.html';
        return;
      }

      try {
        const response = await fetch('/cart', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${token}`
          },
          body: JSON.stringify({ productId, quantity: parseInt(quantity) })
        });

        if (!response.ok) throw new Error('Failed to add item to cart');
        await fetchCart(); // Update the cart count
        alert('Item added to cart!');
      } catch (error) {
        console.error('Error adding item to cart:', error);
        alert('Failed to add item to cart.');
      }
    }

    // Initial load
    document.addEventListener('DOMContentLoaded', () => {
      fetchCart();
    });
  </script>


</body>

</html>